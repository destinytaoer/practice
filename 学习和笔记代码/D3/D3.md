# 选择元素

``` javascript
d3.select(selector)
d3.selectAll(selector)
```

这两个方法传入的是选择器字符串，返回的是包装后的 d3 对象，其原型包含所有 d3 中的方法，所以可以使用链式的写法

```
Rt {_groups: Array(1), _parents: Array(1)}
_groups: [Array(1)] // 选择一个或多个都会是数组切只有一个元素
  0: NodeList(2) // 一个元素时，直接是这个元素，多个时，是 NodeList 对象
    0: div.aa
    1: div.aa
    length: 2
    __proto__: NodeList
  length: 1
  _parents: [html]
__proto__: Object
```

# 插入文本

```
d3.text(string | function)
```

传入一个参数，可以是字符串或者函数
- 字符串：直接渲染这个字符串，转义 HTML
- 函数：渲染这个函数的返回值，接受两个参数
  - data：该元素绑定的数据
  - index：索引

函数写法用于数据与元素绑定的情形，元素没有绑定数据时，data 是 undefined

# 绑定数据

有两个方法：
- datum()：绑定一个数据到选择集上
- data()：绑定一个数组到选择集上，数组的各项值分别与选择集的各元素对应绑定

数据与元素绑定之后，都必须使用 text 方法才能渲染到页面中

## datum

接收的参数是一个字符串，不是字符串则会自动转化为字符串形式

```
let aa = d3.select('body').selectAll('.aa')
let data1 = 'wo'
aa.datum(data1)
aa.text(function(d,i) {
  return d
})
```

## data

接收一个参数，是一个数组、字符串或者其他可遍历的对象。

```
let aa = d3.select('body').selectAll('.aa')
let data = ['aa', 'bb']

aa.data(div)
aa.text(function(d,i) {
  return d
})
```

# 插入和删除

## 插入

两个方法：
- insert：插入当前元素的子代中某个元素之前
- append：插入当前元素的子代中的最后

insert 接收两个参数：标签字符串、插入元素的选择器字符串
append 接收一个参数：标签字符串

这两个方法都省略了创建元素的过程

返回被插入元素

## 删除

remove：直接删除当前元素